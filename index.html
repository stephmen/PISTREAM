<html>

<body>
    <script type="text/javascript" src="https://rawgit.com/131/h264-live-player/master/vendor/dist/http-live-player.js"></script>
    <script>
        const canvas = document.createElement("canvas");
        const video = document.createElement("video");


        document.body.appendChild(canvasD).setAttribute("id", "destination");

        // Streaming to Canvas from Raspberry PI with Express Socket

        const wsavc = new WSAvcPlayer(canvas, "webgl");
        const protocol = window.location.protocol === "http:" ? "ws:" : "ws:"
        wsavc.connect(protocol + '//' + window.location.host + '/video-stream');

        //Streaming to video

        const stream = canvas.captureStream();
        video.srcObject = stream;
        video.play()

        //Streaming to canvas 2D

        function StreamToCanvas2D() {
            let canvasD = document.createElement("canvas");
            canvasD.width = video.videoWidth;
            canvasD.height = video.videoHeight;
            const ctxD = canvasD.getContext('2d');
            setInterval(() => {
                ctxD.drawImage(video, 0, 0, 640, 480);
            }, 15);
        }

        video.addEventListener('progress', StreamToCanvas2D);

    </script>
</body>
</html>